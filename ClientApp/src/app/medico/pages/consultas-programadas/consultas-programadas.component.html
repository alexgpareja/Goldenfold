<div class="consultas-section">
  <h2>Consultas Programadas</h2>

  <!-- Mensaje de error -->
  <div *ngIf="errorMensaje" class="error-message">{{ errorMensaje }}</div>

  <!-- Mostrar las consultas pendientes -->
  <ng-container *ngIf="consultasPendientes.length > 0; else noConsultas">
    <table class="consultas-table">
      <thead>
        <tr>
          <th>ID del Paciente</th>
          <th>Motivo</th>
          <th>Fecha de Solicitud</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let consulta of consultasPendientes">
          <td>{{ consulta.IdPaciente }}</td>
          <td>{{ consulta.Motivo }}</td>
          <td>{{ consulta.FechaSolicitud | date: 'dd/MM/yyyy' }}</td>
          <td>
            <!-- Botón para evaluar la consulta -->
            <button (click)="evaluar(consulta)">Evaluar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </ng-container>

  <!-- Formulario de evaluación fuera de la tabla -->
  <div *ngIf="consultaSeleccionada" class="evaluation-form">
    <h3>Evaluar Paciente: {{ consultaSeleccionada.IdPaciente }}</h3>
    
    <!-- Opción de dar de alta sin ingresar -->
    <button (click)="darAlta(consultaSeleccionada.IdPaciente)">Dar de Alta</button>

    <!-- Opción de solicitar ingreso -->
    <div class="form-group">
      <label for="tipo-cama">Tipo de Cama:</label>
      <select id="tipo-cama" [(ngModel)]="tipoCamaSeleccionado">
        <option value="UCI">UCI</option>
        <option value="General">General</option>
        <option value="Postoperatorio">Postoperatorio</option>
      </select>
      <button (click)="solicitarIngreso(consultaSeleccionada.IdPaciente, tipoCamaSeleccionado)">
        Solicitar Ingreso
      </button>
    </div>
  </div>

  <!-- Mensaje si no hay consultas -->
  <ng-template #noConsultas>
    <p>No hay consultas pendientes para este médico.</p>
  </ng-template>
</div>
