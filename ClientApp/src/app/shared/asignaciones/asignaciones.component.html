<div class="asignaciones-section">
  <h2>Asignaciones</h2>
  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th>ID Paciente</th>
          <th>Ubicación</th>
          <th>Fecha de Asignación</th>
          <th>Fecha de Liberación</th>
          <th>Asignado Por</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let asignacion of asignaciones">
          <td>{{ asignacion.idPaciente }}</td>
          <td>{{ asignacion.ubicacion }}</td>
          <td>{{ asignacion.fechaAsignacion | date: 'short' }}</td>
          <td>{{ asignacion.fechaLiberacion ? (asignacion.fechaLiberacion | date: 'short') : 'N/A' }}</td>
          <td>{{ asignacion.asignadoPor }}</td>
          <td>
            <button (click)="toggleActualizarAsignacion(asignacion)">Actualizar</button>
            <button (click)="borrarAsignacion(asignacion.idAsignacion)">Borrar</button>
          </td>
        </tr>
        <tr *ngIf="asignacionParaActualizar">
          <td colspan="6">
            <div class="form-container">
              <h3>Actualizar Asignación</h3>
              <form (ngSubmit)="actualizarAsignacion()">
                <label for="idPaciente">ID Paciente:</label>
                <input type="number" id="idPaciente" [(ngModel)]="asignacionParaActualizar.idPaciente" name="idPaciente"
                  required>
                <label for="ubicacion">Ubicación:</label>
                <input type="text" id="ubicacion" [(ngModel)]="asignacionParaActualizar.ubicacion" name="ubicacion"
                  required>
                <label for="fechaAsignacion">Fecha de Asignación:</label>
                <input type="date" id="fechaAsignacion" [(ngModel)]="asignacionParaActualizar.fechaAsignacion"
                  name="fechaAsignacion" required>
                <label for="fechaLiberacion">Fecha de Liberación:</label>
                <input type="date" id="fechaLiberacion" [(ngModel)]="asignacionParaActualizar.fechaLiberacion"
                  name="fechaLiberacion">
                <label for="asignadoPor">Asignado Por:</label>
                <input type="number" id="asignadoPor" [(ngModel)]="asignacionParaActualizar.asignadoPor"
                  name="asignadoPor" required>
                <button type="submit">Guardar</button>
              </form>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="form-container">
    <h3>Agregar Asignación</h3>
    <form (ngSubmit)="agregarAsignacion()">
      <label for="idPaciente">ID Paciente:</label>
      <input type="number" id="idPaciente" [(ngModel)]="nuevaAsignacion.idPaciente" name="idPaciente" required>
      <label for="ubicacion">Ubicación:</label>
      <input type="text" id="ubicacion" [(ngModel)]="nuevaAsignacion.ubicacion" name="ubicacion" required>
      <label for="fechaAsignacion">Fecha de Asignación:</label>
      <input type="date" id="fechaAsignacion" [(ngModel)]="nuevaAsignacion.fechaAsignacion" name="fechaAsignacion"
        required>
      <label for="fechaLiberacion">Fecha de Liberación:</label>
      <input type="date" id="fechaLiberacion" [(ngModel)]="nuevaAsignacion.fechaLiberacion" name="fechaLiberacion">
      <label for="asignadoPor">Asignado Por:</label>
      <input type="number" id="asignadoPor" [(ngModel)]="nuevaAsignacion.asignadoPor" name="asignadoPor" required>
      <button type="submit">Agregar</button>
    </form>
  </div>
</div>